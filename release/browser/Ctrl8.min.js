function Ctrl8(a){this._={};this._.Props=a?a:{};this._.Ctrls={}}Ctrl8.ExtendsTo=function(a){function c(){}c.prototype=this.prototype;a.prototype=new c;a.prototype.constructor=a;a.baseConstructor=this;a.superClass=this.prototype;a.ExtendsTo=this.ExtendsTo};Ctrl8.prototype.Prop=function(a,c,b,d,e,f,g,h){Ctrl8.CreateProp(this,g||this._.Props,a,c,b,e,d,f,h)};Ctrl8.prototype.EProp=function(a,c,b,d,e,f,g){Ctrl8.CreateProp(this,g||this._.Props,a,c,b,e,d,f,1)};
Ctrl8.prototype.DrillProp=function(a,c,b){b?1:b=Ctrl8;Ctrl8.CreateProp(this,this._.Ctrls,a,new b(c),!0)};Ctrl8.prototype.CpxProp=function(a,c,b){Ctrl8.CalcProp(this,this._.Props,a,function(a,b){return new c(b[a]||(b[a]={}))},b?null:function(a,b,c){c[b]=a},!1)};Ctrl8.prototype.CalcProp=function(a,c,b,d,e,f){Ctrl8.CalcProp(this,e||this._.Props,a,c,b,d,f)};Ctrl8.prototype.ECalcProp=function(a,c,b,d,e){Ctrl8.CalcProp(this,e||this._.Props,a,c,b,d,1)};
Ctrl8.prototype.CalcOnceProp=function(a,c,b,d,e){Ctrl8.CalcProp(this,d||this._.Props,a,function(a,b){return b[a]||(b[a]=c.call(this,a,b))},null,b,e)};Ctrl8.prototype.ECalcOnceProp=function(a,c,b,d){Ctrl8.CalcProp(this,d||this._.Props,a,function(a,b){return b[a]||(b[a]=c.call(this,a,b))},null,b,1)};Ctrl8.DefCompareFx=function(a,c){return a===c};Ctrl8.DefChangeFx=function(a){};
Ctrl8.CreateProp=function(a,c,b,d,e,f,g,h,k){f?1:f=Ctrl8.DefCompareFx;g?1:g=Ctrl8.DefChangeFx;h={get:function(){return c[b]},configurable:h?!0:!1,eenumerable:k?!0:!1};e?1:h.set=function(a){f.call(this,c[b],a)?0:(c[b]=a,g.call(this,a))};Object.defineProperty(a,b,h);c.hasOwnProperty(b)||void 0===d?1:c[b]=d};Ctrl8.CalcProp=function(a,c,b,d,e,f,g){f={get:function(){return d.call(this,b,c)},configurable:f?!0:!1,enumerable:g?!0:!1};e?f.set=function(a){e.call(this,a,b,c)}:1;Object.defineProperty(a,b,f)};
function DrillCtrl(a){DrillCtrl.baseConstructor.call(this,a);for(var c in this._.Props)a=this._.Props[c],"object"==typeof a?this.DrillProp(c,DrillCtrl,a):this.Prop(c)}Ctrl8.ExtendsTo(DrillCtrl);function EventCtrl(a){EventCtrl.baseConstructor.call(this,a);this._.Events={}}Ctrl8.ExtendsTo(EventCtrl);EventCtrl.prototype.Emit=function(){var a=Array.prototype.slice.call(arguments),c=a[0];a.splice(0,1);(c=this._.Events[c])?c.forEach(function(b){b.apply(this,a)},this):1};
EventCtrl.prototype.On=function(a,c){var b=this._.Events[a]||(this._.Events[a]=[]);0>b.indexOf(c)?b.push(c):1};EventCtrl.prototype.Off=function(a,c){var b=this._.Events[a]||(this._.Events[a]=[]),d=b.indexOf(c);0<=d?b.splice(d,1):1};function WebCtrl(a,c){WebCtrl.baseConstructor.call(this,c);this.DOM="string"==typeof a?document.querySelector(a):a;var b=WebCtrl.GetInit(this.DOM),d=this._.Props,e;for(e in b)d.hasOwnProperty(e)?1:d[e]=b[e]}EventCtrl.ExtendsTo(WebCtrl);
WebCtrl.GetInit=function(a){return a=(a=a.getAttribute("init"))&&a.length?eval("("+a+")")||{}:{}};function WebCtrl8(a){WebCtrl8.baseConstructor.call(this,a);this.Prop("DOM");a=WebCtrl8.GetInit("string"==typeof this.DOM?document.querySelector(this.DOM):this.DOM);var c=this._.Props,b;for(b in a)c.hasOwnProperty(b)?1:c[b]=a[b]}WebCtrl8.GetInit=function(a){return a=(a=a?a.getAttribute("init"):"{}")&&a.length?eval("("+a+")")||{}:{}};EventCtrl.ExtendsTo(WebCtrl8);var _8=function(a){return new DOMCtrl(a)};
function DOMCtrl(a){this.DOM="string"==typeof a?document.querySelector(a):a}
DOMCtrl.prototype.attr=function(a,c){var b=this,d;d=Array.isArray(a)?"array":typeof a;if("string"==d){if(void 0===c)return this.DOM.getAttribute(a);null==c?this.DOM.removeAttribute(a):this.DOM.setAttribute(a,c);return b}if("array"==d){if(void 0===c){var e={};a.forEach(function(a){e[a]=b.DOM.getAttribute(a)});return e}null==c?a.forEach(function(a){b.DOM.removeAttribute(a)}):a.forEach(function(a){b.DOM.setAttribute(a,c)});return b}if("object"==d)for(var f in a)d=a[f],null==d?b.DOM.removeAttribute(f):
b.DOM.setAttribute(f,d.call?d(f):d);return b};DOMCtrl.prototype.prop=function(a,c){var b=this.DOM,d;d=Array.isArray(a)?"array":typeof a;if("string"==d){if(void 0===c)return b[a];null==c?delete b[a]:b[a]=c;return this}if("array"==d){if(void 0===c){var e={};a.forEach(function(a){e[a]=b[a]});return e}null==c?a.forEach(function(a){delete b[a]}):a.forEach(function(a){b[a]=c});return this}if("object"==d)for(var f in a)d=a[f],null==d?delete b[f]:b[f]=d.call?d(f):d;return this};
DOMCtrl.prototype.css=function(a,c){var b=this.DOM.style,d;d=Array.isArray(a)?"array":typeof a;if("string"==d){if(void 0===c)return b.getPropertyValue(a);null==c?b.removeProperty(a):b.setProperty(a,c);return this}if("array"==d){if(void 0===c){var e={};a.forEach(function(a){e[a]=b.getPropertyValue(a)});return e}null==c?a.forEach(function(a){b.removeProperty(a)}):a.forEach(function(a){b.setProperty(a,c)});return this}if("object"==d)for(var f in a)d=a[f],null==d?b.removeProperty(f):b.setProperty(f,d.call?
d(f):d);return this};DOMCtrl.prototype.on=function(a,c){this.DOM.addEventListener(a,c);return this};DOMCtrl.prototype.sel=function(a){return new DOMCtrl(this.DOM.querySelector(a))};DOMCtrl.prototype.append=function(a){a=document.createElement(a);this.DOM.append(a);return new DOMCtrl(a)};DOMCtrl.prototype.remove=function(a){a=this.DOM.querySelectorAll(a);for(var c=0;c<a.length;c++)this.DOM.removeChild(a[c])};
DOMCtrl.prototype.text=function(a){if(void 0===a)return this.DOM.textContent;this.DOM.textContent=a;return this};DOMCtrl.prototype.html=function(a){if(void 0===a)return this.DOM.innerHTML;this.DOM.innerHTML=a;return this};DOMCtrl.prototype.rm=function(a){a=this.DOM.querySelectorAll(a);for(var c=0;c<a.length;c++)this.DOM.removeChild(a[c]);return this};
DOMCtrl.Utils={MouseXY:function(a,c){var b=a.getBoundingClientRect();return[c.clientX-b.left,c.clientY-b.top]},EnableSpan:function(a,c){var b;a.addEventListener("mousemove",function(d){d=window.event||d;if(1==d.buttons){var e=DOMCtrl.Utils.MouseXY(a,d);c.call(a,d,{dx:e[0]-b[0],dy:e[1]-b[1],m1:[b[0],b[1]],m2:[e[0],e[1]]});b=e}else b=DOMCtrl.Utils.MouseXY(a,d);d.stopPropagation();d.preventDefault()})},EnableDrag:function(a,c,b,d){var e;a.addEventListener("mousemove",function(f){f=window.event||f;if(1==
f.buttons){var g=DOMCtrl.Utils.MouseXY(a,f),h=d?d():[0,0];g[0]+=h[0];g[1]+=h[1];c.call(a,f,{dx:g[0]-e[0],dy:g[1]-e[1],m1:[e[0],e[1]],m2:[g[0],g[1]]});b?e=g:0}else{var h=d?d():[0,0];e=DOMCtrl.Utils.MouseXY(a,f);e[0]+=h[0];e[1]+=h[1]}f.stopPropagation();f.preventDefault()})}};
